(this["webpackJsonpparking-app"]=this["webpackJsonpparking-app"]||[]).push([[0],{112:function(e,t,n){},146:function(e,t,n){},190:function(e,t,n){},264:function(e,t,n){},270:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(31),i=n.n(c),s=(n(141),n(23)),o=n(29),r=n(69),l=n(173),u=n(276),d=n(96),j=n(56),b=n(277),f=n(35),h=n(113),m=(n(185),n(187),{apiKey:"AIzaSyAOQT078LAp5vUbNHEkjSyskuM2gD1RUmY",authDomain:"parking-web-app-cda64.firebaseapp.com",projectId:"parking-web-app-cda64",storageBucket:"parking-web-app-cda64.appspot.com",messagingSenderId:"37679185690",appId:"1:37679185690:web:7817f2d17b74e1f53776a3",measurementId:"G-2SEWV5QTM1"});h.a.apps.length||h.a.initializeApp(m);var O=function(e){return new Promise((function(t,n){h.a.auth().signInWithEmailAndPassword(e.email,e.password).then((function(e){t(e)})).catch((function(e){n(e)}))}))},x=(n(190),n(7)),p=function(){var e=Object(o.g)(),t=(Object(o.h)(),Object(a.useState)(!1)),n=Object(s.a)(t,2),c=n[0],i=n[1];return Object(x.jsxs)(u.a,{name:"login",layout:"vertical",onFinish:function(t){i(!0),O(t).then((function(n){localStorage.setItem("userId",n.user.uid),i(!1),window.addEventListener("popstate",(function(){window.history.go(2)})),l.b.success("Login Successfully",1,onclose).then((function(){"admin12@gmail.com"===t.email?e.replace("admin-module/".concat(n.user.uid)):e.replace("user-module/".concat(n.user.uid))}))})).catch((function(e){i(!1),l.b.error(e.message,5)}))},onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(x.jsx)(d.a,{children:Object(x.jsxs)(j.a,{span:12,offset:6,children:[Object(x.jsx)("h1",{className:"heading",children:"Login"}),Object(x.jsx)(u.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Invalid email"}],children:Object(x.jsx)(b.a,{})})]})}),Object(x.jsx)(d.a,{children:Object(x.jsx)(j.a,{span:12,offset:6,children:Object(x.jsx)(u.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(x.jsx)(b.a.Password,{})})})}),Object(x.jsx)(d.a,{children:Object(x.jsx)(j.a,{span:12,offset:6,children:Object(x.jsx)(r.b,{to:"/signup",children:"Don't have an account?"})})}),Object(x.jsx)(d.a,{children:Object(x.jsx)(j.a,{span:12,offset:16,children:Object(x.jsx)(u.a.Item,{children:Object(x.jsx)(f.a,{loading:c,type:"primary",htmlType:"submit",children:"Login"})})})})]})},g=function(e){return new Promise((function(t,n){h.a.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(a){h.a.database().ref("users").push({email:e.email.toLowerCase(),first_name:e.first_name,last_name:e.last_name,uid:a.user.uid}).then((function(){t(a)})).catch((function(e){n(e),console.log(e)}))})).catch((function(e){n(e)}))}))},k=(n(264),function(){var e=Object(o.g)(),t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],i=n[1];return Object(x.jsxs)(u.a,{name:"singup",layout:"vertical",onFinish:function(t){i(!0),g(t).then((function(t){i(!1),l.b.success("User Registration Successfully",5,onclose).then((function(){e.push("/")}))})).catch((function(e){i(!1),l.b.error(e.message,5)}))},onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(x.jsx)(d.a,{children:Object(x.jsxs)(j.a,{span:12,offset:6,children:[Object(x.jsx)("h1",{className:"heading",children:"Registration"}),Object(x.jsx)(u.a.Item,{label:"First Name",name:"first_name",rules:[{required:!0,message:"Please input your first name!"}],children:Object(x.jsx)(b.a,{})})]})}),Object(x.jsx)(d.a,{children:Object(x.jsx)(j.a,{span:12,offset:6,children:Object(x.jsx)(u.a.Item,{label:"Last Name",name:"last_name",rules:[{required:!0,message:"Please input your last name!"}],children:Object(x.jsx)(b.a,{})})})}),Object(x.jsx)(d.a,{children:Object(x.jsx)(j.a,{span:12,offset:6,children:Object(x.jsx)(u.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Invalid email"}],children:Object(x.jsx)(b.a,{})})})}),Object(x.jsx)(d.a,{children:Object(x.jsx)(j.a,{span:12,offset:6,children:Object(x.jsx)(u.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(x.jsx)(b.a.Password,{})})})}),Object(x.jsx)(d.a,{children:Object(x.jsx)(j.a,{span:12,offset:6,children:Object(x.jsx)(r.b,{to:"/",children:"Already have an account ?"})})}),Object(x.jsx)(d.a,{children:Object(x.jsx)(j.a,{span:12,offset:16,children:Object(x.jsx)(u.a.Item,{children:Object(x.jsx)(f.a,{loading:c,type:"primary",htmlType:"submit",children:"Signup"})})})})]})}),y=n(272),v=n(82),S=n(274),I=(n(112),function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)([]),o=Object(s.a)(i,2),r=o[0],u=o[1],d=function(){h.a.database().ref().child("users").get().then((function(e){e.exists()?c(e.val()):console.log("No data available")})).catch((function(e){console.error(e)}))};Object(a.useEffect)((function(){d()}),[]);var j=function(e){var t=null;h.a.database().ref().child("users").get().then((function(n){if(n.exists()){for(var a in n.val())n.val()[a].uid===e.uid&&(t=a);!function(e,t){new Promise((function(t,n){h.a.database().ref("users/"+e).remove().then((function(e){t(e),l.b.success("User has been deleted Successfully",2,onclose).then((function(){d()}))})).catch((function(e){n(e)}))}))}(t)}else console.log("No data available")})).catch((function(e){console.error(e)}))};Object(a.useEffect)((function(){!function(){var e=[];for(var t in n)"admin12@gmail.com"!==n[t].email&&e.push(n[t]);u(e)}()}),[n]);var b=[{title:"First Name",dataIndex:"first_name",key:"first_name"},{title:"Last Name",dataIndex:"last_name",key:"last_name"},{title:"Email",dataIndex:"email",key:"email"},{title:"Action",dataIndex:"cancel",render:function(e,t){return Object(x.jsx)("a",{onClick:function(e){j(t)},children:"Delete"})}}];return Object(x.jsx)(S.a,{columns:b,dataSource:r})}),_=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)([]),o=Object(s.a)(i,2),r=o[0],u=o[1],d=function(){h.a.database().ref().child("slots").get().then((function(e){e.exists()?c(e.val()):console.log("No data available")})).catch((function(e){console.error(e)}))};Object(a.useEffect)((function(){d()}),[]);Object(a.useEffect)((function(){!function(){var e=[];for(var t in n)""!==n[t].email&&e.push(n[t]);u(e)}()}),[n]);var j=function(e){var t=null;h.a.database().ref().child("slots").get().then((function(n){if(n.exists()){for(var a in n.val())n.val()[a].uid===e.uid&&(t=a);!function(e,t){new Promise((function(n,a){h.a.database().ref("slots/"+e).set({slot_name:t.slot_name,email:"",is_booked:!1,date:"",time_duration:""}).then((function(e){n(e),l.b.success("Slot has been Cancelled Successfully",2,onclose).then((function(){d()}))})).catch((function(e){a(e)}))}))}(t,e)}else console.log("No data available")})).catch((function(e){console.error(e)}))},b=[{title:"Email",dataIndex:"email",key:"email"},{title:"Slot",dataIndex:"slot_name",key:"slot_name"},{title:"Date",dataIndex:"date",key:"date"},{title:"Time",dataIndex:"time_duration",key:"time_duration"},{title:"Action",dataIndex:"cancel",render:function(e,t){return Object(x.jsx)("a",{onClick:function(e){j(t)},children:"Cancel"})}}];return Object(x.jsx)(S.a,{columns:b,dataSource:r,pagination:!1})},w=n(278),C=b.a.TextArea,F=function(e){var t=u.a.useForm(),n=Object(s.a)(t,1)[0],a=e.isModalVisible,c=e.handleOk,i=e.handleCancel,o=e.textAreaChange;return Object(x.jsx)(w.a,{title:"Feedback Reply",visible:a,onCancel:i,footer:null,children:Object(x.jsxs)(u.a,{form:n,name:"feedback",layout:"vertical",onFinish:function(){c()},children:[Object(x.jsx)(d.a,{children:Object(x.jsx)(j.a,{span:24,children:Object(x.jsx)(u.a.Item,{label:"Reply",name:"feedback",rules:[{required:!0,message:"Please enter your reply!"}],children:Object(x.jsx)(C,{onChange:o,placeholder:"Reply to user feedback",autoSize:{minRows:8},showCount:!0,maxLength:100})})})}),Object(x.jsx)(d.a,{children:Object(x.jsx)(j.a,{span:24,offset:20,children:Object(x.jsx)(u.a.Item,{children:Object(x.jsx)(f.a,{type:"primary",htmlType:"submit",children:"submit"})})})})]})})},P=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),o=Object(s.a)(i,2),r=o[0],u=o[1],d=Object(a.useState)(""),j=Object(s.a)(d,2),b=j[0],f=j[1],m=Object(a.useState)(null),O=Object(s.a)(m,2),p=O[0],g=O[1],k=Object(a.useState)([]),y=Object(s.a)(k,2),v=y[0],I=y[1];Object(a.useEffect)((function(){h.a.database().ref().child("feedback").get().then((function(e){e.exists()?c(e.val()):console.log("No data available")})).catch((function(e){console.error(e)}))}),[]);Object(a.useEffect)((function(){!function(){var e=[];for(var t in n)e.push(n[t]);I(e)}()}),[n]);var _=[{title:"Email",dataIndex:"email",key:"email"},{title:"Feedback",dataIndex:"feed_back",key:"feed_back"},{title:"Action",dataIndex:"Reply",render:function(e,t){return Object(x.jsx)("a",{onClick:function(e){!function(e){u(!0),g(e)}(t)},children:"Reply"})}}],w=function(){var e=null;h.a.database().ref().child("feedback").get().then((function(t){if(t.exists()){for(var n in t.val())t.val()[n].uid===p.uid&&(e=n);!function(e,t){new Promise((function(n,a){h.a.database().ref("feedback/"+e).set({email:t.email,feedback:t.feed_back,uid:t.uid,reply:b}).then((function(e){n(e),u(!1),f(""),l.b.success("Reply has been sent Successfully",2)})).catch((function(e){a(e)}))}))}(e,p)}}))};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(S.a,{columns:_,dataSource:v}),Object(x.jsx)(F,{textAreaChange:function(e){f(e.target.value)},isModalVisible:r,handleOk:function(){w()},handleCancel:function(){u(!1)}})]})},N=n(280),A=n(281),E=n(282),T=n(283),B=y.a.Sider,L=y.a.Content,R=function(){var e=Object(o.g)(),t=Object(a.useState)("user"),n=Object(s.a)(t,2),c=n[0],i=n[1];return Object(x.jsxs)(y.a,{style:{minHeight:"100vh"},children:[Object(x.jsxs)(B,{trigger:null,children:[Object(x.jsx)("div",{className:"logo"}),Object(x.jsxs)(v.a,{onClick:function(t){"logout"===t.key?h.a.auth().signOut().then((function(){e.replace("/"),localStorage.clear()})).catch((function(e){l.b.success(e,5)})):i(t.key)},theme:"dark",mode:"inline",defaultSelectedKeys:c,children:[Object(x.jsx)(v.a.Item,{icon:Object(x.jsx)(N.a,{}),children:"Users"},"user"),Object(x.jsx)(v.a.Item,{icon:Object(x.jsx)(A.a,{}),children:"Parking Booked"},"parking_booked"),Object(x.jsx)(v.a.Item,{icon:Object(x.jsx)(E.a,{}),children:"Feedback"},"feed_back"),Object(x.jsx)(v.a.Item,{icon:Object(x.jsx)(T.a,{}),children:"Logout"},"logout")]})]}),Object(x.jsx)(y.a,{className:"site-layout",children:Object(x.jsxs)(L,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:280},children:["user"===c&&Object(x.jsx)(I,{}),"parking_booked"===c&&Object(x.jsx)(_,{}),"feed_back"===c&&Object(x.jsx)(P,{})]})})]})},D=n(83),q=n(275),U=n(279),H=(n(146),function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],i=n[1],o=function(){var e=[];h.a.database().ref().child("slots").get().then((function(t){for(var n in t.val()){var a=Object(D.a)(Object(D.a)({},t.val()[n]),{},{id:n});e.push(a)}i(e)})).catch((function(e){console.error(e)}))};Object(a.useEffect)((function(){o()}),[]);var r=function(e){(function(e){return new Promise((function(t,n){h.a.database().ref("slots/"+e.id).set({slot_name:e.slot_name,email:"",is_booked:!1,date:"",time_duration:""}).then((function(e){t(e)})).catch((function(e){n(e)}))}))})(e).then((function(e){l.b.success("Your parking slot has been canceled Successfully",5),o()})).catch((function(e){console.log(e)}))};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h1",{children:"Parking Slots"}),Object(x.jsx)(U.b,{direction:"vertical",children:function(){var t=localStorage.getItem("userId");return null===c||void 0===c?void 0:c.map((function(n){return Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)(q.a,{onClick:function(){!function(t){t.is_booked||e.goToBooking(t)}(n)},title:n.slot_name,className:n.is_booked?"slot-booked":"slot-empty",children:n.is_booked?Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"Booked"}),Object(x.jsxs)("p",{children:[n.date," (",n.time_duration,")"]})]}):Object(x.jsx)("div",{children:Object(x.jsx)("p",{children:"Empty"})})}),Object(x.jsx)(f.a,{onClick:function(){r(n)},type:"primary",disabled:!n.is_booked||t!==n.uid,style:{height:"40px",marginLeft:"20px"},children:"Cancellation"})]})}))}()})]})}),z=b.a.TextArea,M=function(){var e=u.a.useForm(),t=Object(s.a)(e,1)[0],n=Object(a.useState)(!1),c=Object(s.a)(n,2),i=c[0],o=c[1];return Object(x.jsxs)(u.a,{form:t,name:"feedback",layout:"vertical",onFinish:function(e){return o(!0),new Promise((function(n,a){var c=h.a.auth().currentUser,i=c.email,s=c.uid;h.a.database().ref("feedback").push({email:i,feed_back:e.feedback,uid:s}).then((function(e){n(e),o(!1),l.b.success("Your feedback has been submitted Successfully",5),t.resetFields()})).catch((function(e){a(e),o(!1)}))}))},children:[Object(x.jsx)("h1",{children:"Feedback"}),Object(x.jsx)(d.a,{children:Object(x.jsx)(j.a,{span:12,children:Object(x.jsx)(u.a.Item,{label:"Feedback",name:"feedback",rules:[{required:!0,message:"Please enter your feedback!"}],children:Object(x.jsx)(z,{placeholder:"Submit your feedback",autoSize:{minRows:8},showCount:!0,maxLength:100})})})}),Object(x.jsx)(d.a,{children:Object(x.jsx)(j.a,{span:12,offset:10,children:Object(x.jsx)(u.a.Item,{children:Object(x.jsx)(f.a,{loading:i,type:"primary",htmlType:"submit",children:"submit"})})})})]})},Y=n(153),K=n(273),V=n(45),W=n.n(V),J=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(!1),r=Object(s.a)(o,2),l=r[0],u=r[1],d=Object(a.useState)(),j=Object(s.a)(d,2),b=j[0],h=j[1],m=Object(a.useState)(),O=Object(s.a)(m,2),p=O[0],g=O[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(K.a,{style:{width:"240px",marginBottom:"40px",marginTop:"10px"},format:"hh:mm",placeholder:"Select Start Time",hideDisabledOptions:!0,open:c,onOpenChange:i,value:b,onChange:function(t){h(t),e.startTime(W()(t).format("hh:mm"))},disabledHours:function(){var e=p?p.hours():24;return Array.from({length:24},(function(e,t){return t})).filter((function(t){return t<-1||t>e}))},disabledMinutes:function(e){var t=p&&e>=p.hours()?p.minutes():60;return Array.from({length:60},(function(e,t){return t})).filter((function(e){return e<-1||e>t}))},disabledSeconds:function(e,t){return[]},addon:function(){return Object(x.jsx)(f.a,{size:"small",type:"primary",onClick:function(){i(!1),u(!0)},children:"Ok"})}}),"\xa0 - \xa0",Object(x.jsx)(K.a,{format:"hh:mm",style:{width:"240px",marginBottom:"40px",marginTop:"10px"},placeholder:"Select End Time",hideDisabledOptions:!0,open:l,onOpenChange:u,value:p,onChange:function(t){g(t),e.endTime(W()(t).format("hh:mm"))},disabledHours:function(){var e=b?b.hours():-1;return Array.from({length:24},(function(e,t){return t})).filter((function(t){return t<e||t>24}))},disabledMinutes:function(e){var t=b&&e<=b.hours()?b.minutes():-1;return Array.from({length:60},(function(e,t){return t})).filter((function(e){return e<t||e>60}))},disabledSeconds:function(e,t){return[]},addon:function(){return Object(x.jsx)(f.a,{size:"small",type:"primary",onClick:function(){u(!1)},children:"Ok"})}})]})},Q=function(e){var t=Object(a.useState)(null),n=Object(s.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(null),r=Object(s.a)(o,2),u=r[0],d=r[1],j=Object(a.useState)(null),b=Object(s.a)(j,2),m=b[0],O=b[1],p=Object(a.useState)(!1),g=Object(s.a)(p,2),k=g[0],y=g[1];var v=function(){y(!0),new Promise((function(t,n){var a=e.userData,i=h.a.auth().currentUser,s=i.email,o=i.uid;h.a.database().ref("slots/"+a.id).set({slot_name:a.slot_name,email:s,is_booked:!0,date:c,time_duration:u+","+m,uid:o}).then((function(e){t(e)})).catch((function(e){n(e)}))})).then((function(t){l.b.success("Your parking slot has been booked Successfully",5,onclose).then((function(){e.goBack()})),y(!1)})).catch((function(e){y(!1)}))};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h1",{children:"Booking Slot"}),Object(x.jsx)("div",{children:Object(x.jsx)(Y.a,{style:{width:"500px",marginBottom:"40px",marginTop:"10px"},disabledDate:function(e){return e&&e<W()().startOf("day")},onChange:function(e,t){i(t)}})}),Object(x.jsx)("div",{children:Object(x.jsx)(J,{startTime:function(e){d(e)},endTime:function(e){O(e)}})}),Object(x.jsx)(f.a,{onClick:function(){e.goBack()},type:"primary",style:{marginRight:"10px"},children:"Back"}),Object(x.jsx)(f.a,{disabled:!(c&&u&&m),loading:k,onClick:function(){v()},type:"primary",children:"Submit"})]})},G=n(284),X=y.a.Sider,Z=y.a.Content,$=function(){var e=Object(o.g)(),t=Object(a.useState)("slot"),n=Object(s.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)(null),u=Object(s.a)(r,2),d=u[0],j=u[1];return Object(x.jsxs)(y.a,{style:{minHeight:"100vh"},children:[Object(x.jsxs)(X,{trigger:null,children:[Object(x.jsx)("div",{className:"logo"}),Object(x.jsxs)(v.a,{onClick:function(t){"logout"===t.key?h.a.auth().signOut().then((function(){e.replace("/"),localStorage.clear()})).catch((function(e){l.b.success(e,5)})):i(t.key)},theme:"dark",mode:"inline",defaultSelectedKeys:c,children:[Object(x.jsx)(v.a.Item,{icon:Object(x.jsx)(G.a,{}),children:"Available Slots"},"slot"),Object(x.jsx)(v.a.Item,{icon:Object(x.jsx)(E.a,{}),children:"Feedback"},"feed_back"),Object(x.jsx)(v.a.Item,{icon:Object(x.jsx)(T.a,{}),children:"Logout"},"logout")]})]}),Object(x.jsx)(y.a,{className:"site-layout",children:Object(x.jsxs)(Z,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:280},children:["slot"===c&&Object(x.jsx)(H,{goToBooking:function(e){var t;t=e,i("parking_booked"),j(t)},userData:d}),"parking_booked"===c&&Object(x.jsx)(Q,{goBack:function(){i("slot")},userData:d}),"feed_back"===c&&Object(x.jsx)(M,{})]})})]})},ee=n(177);var te=["component"],ne=function(e){var t=e.component,n=Object(ee.a)(e,te);return Object(x.jsx)(o.b,Object(D.a)(Object(D.a)({},n),{},{render:function(e){return function(){var e=localStorage.getItem("userId");return!(!e||null===e)}()?Object(x.jsx)(t,Object(D.a)({},e)):Object(x.jsx)(o.a,{to:{pathname:"/",state:{from:e.location}}})}}))},ae=[{path:"/admin-module/:id",component:R},{path:"/user-module/:id",component:$}];function ce(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(o.d,{children:[Object(x.jsx)(o.b,{exact:!0,path:"/",component:p}),Object(x.jsx)(o.b,{exact:!0,path:"/signup",component:k}),ae.map((function(e){return Object(x.jsx)(ne,{exact:!0,path:e.path,component:e.component})})),Object(x.jsx)(o.b,{path:"*",component:function(){return"404 Not Found"}})]})})}var ie=document.getElementById("root");i.a.render(Object(x.jsx)(r.a,{children:Object(x.jsx)(ce,{})}),ie)}},[[270,1,2]]]);
//# sourceMappingURL=main.f2a9e580.chunk.js.map